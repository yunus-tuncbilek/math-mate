<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Math-Mate Chat</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$','$$'], ['\\[','\\]']] },
      options: { skipHtmlTags: ['script','style','textarea','pre'] }
    };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
    <header>
        <h1>Math-Mate Chat</h1>
    </header>
    <div class="container">
        <div class="section">
            <h2>Conversation with AI</h2>
            <div class="interaction-list">
                <ul>
                    {% for msg in messages %}
                    <li>
                        {% if msg.role == 'user' %}
                            <strong>You:</strong> {{ msg.text }}
                        {% else %}
                            <strong>AI:</strong> {{ msg.text }}
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <form method="post">
                <input type="text" name="message" placeholder="Type your message..." autofocus>
                <button type="submit">Send</button>
            </form>
        </div>
        <div class="link">
            <a href="{{ url_for('index') }}">Back to Dashboard</a>
        </div>
    </div>

    <!-- re-typeset in case content inserted after MathJax begin -->
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise().catch(function (err) { console.error(err); });
      }
    });
    </script>
</body>
</html>